var e={d:(r,t)=>{for(var n in t)e.o(t,n)&&!e.o(r,n)&&Object.defineProperty(r,n,{enumerable:!0,get:t[n]})},o:(e,r)=>Object.prototype.hasOwnProperty.call(e,r)},r={};e.d(r,{e_:()=>n,hX:()=>o,UI:()=>s});class t{elem;eventType;listener;constructor(e,r,t){this.elem=e,this.eventType=r,this.listener=t}unsubscribe=()=>{this.elem?.removeEventListener(this.eventType,this.listener)}}class n{_innerSource;subscribers=[];_parent$;_preProcessOperations=[];_isError=!1;constructor(e){this._innerSource=e}next(...e){this._isOnlyFunctionsOrOnlyScalars(e),e.forEach((e=>{try{this._innerSource=this._preProcessOperations.reduce(((e,r)=>r(e)),this._nextEvent(e)),this._isError=!1,this.subscribers.forEach((e=>e(this._innerSource)))}catch{this._isError=!0}}))}subscribe(e){if(!this._isFunction(e))throw new Error("Please provide a function");this.subscribers.push(e),this._isError||e(this._innerSource)}pipe(...e){const r=new n;try{const t=this._computeValue(...this._filterNonFunctions(...e));r.next(t)}catch{r._isError=!0}return r}fork(...e){const r=new n;return r._parent$=this,r._preProcessOperations=e,this.subscribe((e=>{r.next(e)})),r}addEventListener(e,r,n,s){const i=document.querySelector(e);if(!i)throw new Error(`Could not find any element with selector "${e}"`);const o=e=>n(this._innerSource,e);return i.addEventListener(r,o,s),new t(i,r,o)}_filterNonFunctions(...e){return e.filter((e=>this._isFunction(e)))}_isFunction(e){return"function"==typeof e}_isOnlyFunctionsOrOnlyScalars(e){const r=e.every((e=>this._isFunction(e))),t=e.every((e=>!this._isFunction(e)));if(!r&&!t)throw new Error("Please provide either only scalar values or only functions")}_nextEvent(e){let r;return r=this._isFunction(e)?e(this._innerSource):e,r}_computeValue(...e){if(e.length>0)return e.slice(1).reduce(((e,r)=>r(e)),e[0](this._innerSource))}}const s=function(e){return r=>e(r)};class i{message;stack;name="FilterError";constructor(e="",r){this.message=e,this.stack=r}}const o=function(e){return r=>{if(e(r))return r;throw new i}};var c=r.e_,u=r.hX,h=r.UI;export{c as Fleuve,u as filter,h as map};